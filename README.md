# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ8  
## –ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Jinja2

*–°—Ç—É–¥–µ–Ω—Ç:* –°–∞–≥–æ—Ä –ê—Ñ—Å–∞—Ä –£–¥–¥–∏–Ω  
*–ì—Ä—É–ø–ø–∞:* P3123

##  1. –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–¶–µ–ª—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (Flask/Django), –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å http.server –∏ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä *Jinja2*.

–ó–∞–¥–∞—á–∏ —Ä–∞–±–æ—Ç—ã:

- –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É *MVC* (Model‚ÄìView‚ÄìController);
- —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python;
- —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–¥–µ–ª–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ —Å –≥–µ—Ç—Ç–µ—Ä–∞–º–∏ –∏ —Å–µ—Ç—Ç–µ—Ä–∞–º–∏;
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jinja2 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö;
- —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã /, /users, /user?id=..., /currencies, /author;
- —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;
- –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é (type hints) –∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å *PEP-257*.

##  2. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

–í —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥–µ–ª–∏:

### *1. Author*
–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ–± –∞–≤—Ç–æ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
–ü–æ–ª—è:
- name ‚Äî –°–∞–≥–æ—Ä –ê—Ñ—Å–∞—Ä –£–¥–¥–∏–Ω;
- group ‚Äî P3123.

### *2. App*
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.  
–ü–æ–ª—è:
- name ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;
- version ‚Äî –≤–µ—Ä—Å–∏—è;
- author ‚Äî –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ Author.

### *3. User*
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã.  
–ü–æ–ª—è:
- id ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä;
- name ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### *4. Currency*
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞–ª—é—Ç—É.  
–ü–æ–ª—è:
- id;
- num_code;
- char_code;
- name;
- value;
- nominal.

### *5. UserCurrency*
–°–≤—è–∑—å —Ç–∏–ø–∞ ¬´–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º¬ª.  
–ü–æ–ª—è:
- id;
- user_id;
- currency_id.

–í–æ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≥–µ—Ç—Ç–µ—Ä—ã –∏ —Å–µ—Ç—Ç–µ—Ä—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ç–∏–ø–æ–≤ –∏ –∑–Ω–∞—á–µ–Ω–∏–π.  
–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è TypeError –∏–ª–∏ ValueError.

---

##  3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (MVC)

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π MVC:


myapp/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ author.py
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îî‚îÄ‚îÄ user_currency.py
‚îÇ
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ users.html
‚îÇ   ‚îú‚îÄ‚îÄ currencies.html
‚îÇ   ‚îú‚îÄ‚îÄ user_detail.html
‚îÇ   ‚îî‚îÄ‚îÄ author.html
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ currencies_api.py
‚îÇ
‚îî‚îÄ‚îÄ myapp.py


### ‚Ä¢ *Models (–º–æ–¥–µ–ª–∏)*  
–õ–æ–≥–∏–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.

### ‚Ä¢ *Views (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)*  
HTML-—à–∞–±–ª–æ–Ω—ã Jinja2.

### ‚Ä¢ *Controller (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)*  
–§–∞–π–ª myapp.py, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∏ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.


## 4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### 4.1 –ú–æ–¥–µ–ª–∏  
–ú–æ–¥–µ–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç:

- –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (_name, _value –∏ —Ç. –¥.);
- –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã (@property);
- –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ (isinstance);
- –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.

–ü—Ä–∏–º–µ—Ä:

python
if not isinstance(value, str):
    raise TypeError("–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π.")
if not value.strip():
    raise ValueError("–ò–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.")


### 4.2 –°–µ—Ä–≤–µ—Ä –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã:

python
from http.server import HTTPServer, BaseHTTPRequestHandler


–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:

| –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| / | –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| /users | —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| /user?id=N | —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| /currencies | —Å–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç |
| /author | –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–µ |

–†–∞–∑–±–æ—Ä query-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

python
parsed = urlparse(self.path)
query = parse_qs(parsed.query)


### 4.3 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞ Jinja2

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è:

python
env = Environment(
    loader=PackageLoader("myapp"),
    autoescape=select_autoescape()
)


–ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞:

python
template = env.get_template("index.html")
html = template.render(app_name="...", author_name="...")


### 4.4 –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

–§—É–Ω–∫—Ü–∏—è get_currencies() –≤—Ä–µ–º–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

python
[
    Currency(1, 840, "USD", "–î–æ–ª–ª–∞—Ä –°–®–ê", 90.5, 1),
    Currency(2, 978, "EUR", "–ï–≤—Ä–æ", 95.2, 1),
]


## 5. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

‚ö† –°—é–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü:  
- /  
- /users  
- /user?id=1  
- /currencies  
- /author  

## üìå 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –º–æ–¥—É–ª—å unittest.

–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–æ–≤:

- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π;
- –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ç—Ç–µ—Ä–æ–≤ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π;
- —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_currencies():
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫;
  - —ç–ª–µ–º–µ–Ω—Ç—ã ‚Äî –æ–±—ä–µ–∫—Ç—ã –∫–ª–∞—Å—Å–∞ Currency;
  - –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π –≤–∞–ª–∏–¥–Ω—ã.

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

bash
python -m unittest


–í—Å–µ *17 —Ç–µ—Å—Ç–æ–≤* —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏:


.................
----------------------------------------------------------------------
Ran 17 tests in 0.02s

OK


##  7. –í—ã–≤–æ–¥—ã

–í —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —è:

- –∏–∑—É—á–∏–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É MVC;
- –Ω–∞—É—á–∏–ª—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º HTTP-—Å–µ—Ä–≤–µ—Ä–æ–º Python;
- —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤;
- –æ—Å–≤–æ–∏–ª —Ä–∞–±–æ—Ç—É —Å —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–º Jinja2;
- —Å–æ–∑–¥–∞–ª –º–æ–¥–µ–ª–∏ —Å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π;
- —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∞–ª—é—Ç –∏ –ø–æ–¥–ø–∏—Å–æ–∫;
- —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã;
- –æ—Ñ–æ—Ä–º–∏–ª –ø—Ä–æ–µ–∫—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ PEP-8 –∏ PEP-257.

–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é, –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Å–¥–∞—á–µ.


## 8. GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

(–ó–¥–µ—Å—å —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)  
–ü—Ä–∏–º–µ—Ä:


https://github.com/username/lab8-currencies


## 9. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

bash
git clone <repo_url>
cd lab8_currencies
python -m venv .venv
.venv\Scripts\activate        # Windows
pip install -r requirements.txt
python -m myapp.myapp


–°–µ—Ä–≤–µ—Ä –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É:


http://127.0.0.1:8000/
