# Лабораторная работа №8  
## Клиент-серверное приложение на Python с использованием Jinja2

*Студент:* Сагор Афсар Уддин  
*Группа:* P3123

##  1. Цель работы

Цель лабораторной работы — разработать простое клиент-серверное приложение без использования веб-фреймворков (Flask/Django), используя только стандартный модуль http.server и шаблонизатор *Jinja2*.

Задачи работы:

- понять архитектуру *MVC* (Model–View–Controller);
- реализовать собственный HTTP-сервер на Python;
- разработать модели предметной области с геттерами и сеттерами;
- использовать Jinja2 для отображения данных;
- реализовать маршруты /, /users, /user?id=..., /currencies, /author;
- реализовать тесты для моделей и логики приложения;
- применить типизацию (type hints) и оформить документацию в соответствии с *PEP-257*.

##  2. Описание предметной области

В системе используются следующие модели:

### *1. Author*
Хранит данные об авторе приложения.  
Поля:
- name — Сагор Афсар Уддин;
- group — P3123.

### *2. App*
Информация о приложении.  
Поля:
- name — название приложения;
- version — версия;
- author — объект класса Author.

### *3. User*
Пользователь системы.  
Поля:
- id — уникальный идентификатор;
- name — имя пользователя.

### *4. Currency*
Представляет валюту.  
Поля:
- id;
- num_code;
- char_code;
- name;
- value;
- nominal.

### *5. UserCurrency*
Связь типа «многие ко многим».  
Поля:
- id;
- user_id;
- currency_id.

Во всех моделях реализованы геттеры и сеттеры с валидацией типов и значений.  
При ошибках выбрасываются исключения TypeError или ValueError.


##  3. Структура проекта (MVC)

### • *Models (модели)*  
Логика и структура данных.

### • *Views (представления)*  
HTML-шаблоны Jinja2.

### • *Controller (контроллер)*  
Файл myapp.py, в котором реализованы маршруты и логика обработки запросов.


## 4. Реализация проекта

### 4.1 Модели  
Модели содержат:

- приватные атрибуты (_name, _value и т. д.);
- геттеры/сеттеры (@property);
- проверки типов (isinstance);
- обработку ошибок.

Пример:

python
if not isinstance(value, str):
    raise TypeError("Имя должно быть строкой.")
if not value.strip():
    raise ValueError("Имя не может быть пустым.")


### 4.2 Сервер и маршрутизация

Приложение использует стандартные классы:

python
from http.server import HTTPServer, BaseHTTPRequestHandler


Поддерживаемые маршруты:

| Маршрут | Описание |
|--------|----------|
| / | главная страница |
| /users | список пользователей |
| /user?id=N | страница пользователя |
| /currencies | список валют |
| /author | информация об авторе |

Разбор query-параметров:

python
parsed = urlparse(self.path)
query = parse_qs(parsed.query)


### 4.3 Использование шаблонизатора Jinja2

При старте приложения создаётся единый объект окружения:

python
env = Environment(
    loader=PackageLoader("myapp"),
    autoescape=select_autoescape()
)


Загрузка шаблона:

python
template = env.get_template("index.html")
html = template.render(app_name="...", author_name="...")


### 4.4 Получение курсов валют

Функция get_currencies() временно возвращает тестовые данные:

python
[
    Currency(1, 840, "USD", "Доллар США", 90.5, 1),
    Currency(2, 978, "EUR", "Евро", 95.2, 1),
]


## 5. Примеры работы приложения

Сюда необходимо вставить собственные скриншоты страниц:  
- /  
- /users  
- /user?id=1  
- /currencies  
- /author  

## 6. Тестирование

Для тестирования использован модуль unittest.

Покрытие тестов:

- корректность создания моделей;
- проверки сеттеров и исключений;
- тестирование get_currencies():
  - возвращает список;
  - элементы — объекты класса Currency;
  - значения полей валидны.

Запуск тестов:

bash
python -m unittest


Все *17 тестов* успешно прошли:


.................
----------------------------------------------------------------------
Ran 17 tests in 0.02s

OK


##  7. Выводы

В ходе выполнения работы я:

- изучил архитектуру MVC;
- научился работать со стандартным HTTP-сервером Python;
- реализовал маршрутизацию без использования веб-фреймворков;
- освоил работу с шаблонизатором Jinja2;
- создал модели с валидаторами и типизацией;
- реализовал отображение пользователей, валют и подписок;
- разработал модульные тесты;
- оформил проект в соответствии с требованиями PEP-8 и PEP-257.

Работа выполнена полностью, проект готов к сдаче.


## 8. GitHub репозиторий

(Здесь размещается ссылка на ваш репозиторий)  
Пример:


https://github.com/sagorgit/lab8_currencies/tree/main


## 9. Как запустить проект
cd lab8_currencies
python -m venv .venv
.venv\Scripts\activate        # Windows
pip install -r requirements.txt
python -m myapp.myapp


Сервер откроется по адресу:


http://127.0.0.1:8000/
